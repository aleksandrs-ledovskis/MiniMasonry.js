!function(){"use strict";function t(t){return this._sizes=[],this._columns=[],this._container=null,this._count=null,this._width=0,this._gutter=0,this._resizeTimeout=null,this.conf={baseWidth:255,gutter:10,container:null,minify:!0,ultimateGutter:5},this.init(t),this}t.prototype.init=function(t){for(var i in this.conf)null!=t[i]&&(this.conf[i]=t[i]);if(this._container=document.querySelector(this.conf.container),!this._container)throw new Error("Container not found or missing");window.addEventListener("resize",this.resizeThrottler.bind(this)),this.layout()},t.prototype.reset=function(){this._sizes=[],this._columns=[],this._count=null,this._width=this._container.clientWidth;var t=this.conf.baseWidth;this._width<t&&(this._width=t,this._container.style.minWidth=t+"px"),this._gutter=this.conf.gutter,1==this.getCount()&&(this._gutter=this.conf.ultimateGutter,this._count=1),this._width<this.conf.baseWidth+2*this._gutter&&(this._gutter=0)},t.prototype.getCount=function(){return Math.floor((this._width-this._gutter)/(this.conf.baseWidth+this._gutter))},t.prototype.layout=function(){if(this._container){this.reset(),null==this._count&&(this._count=this.getCount());for(var t=Math.round((this._width-this._gutter*(this._count-1))/this._count),i=0;i<this._count;i++)this._columns[i]=0;for(var s=this._container.querySelectorAll(this.conf.container+" > *"),n=0;n<s.length;n++)s[n].style.width=t+"px",this._sizes[n]=s[n].clientHeight;var e=0;this._count>this._sizes.length&&(e=(this._width-this._sizes.length*t-this._gutter)/2-this._gutter);for(var o=0;o<s.length;o++){var h=this.conf.minify?this.getShortest():this.getNextColumn(o),r=e+(t+this._gutter)*h,u=this._columns[h];s[o].style.transform="translate3d("+Math.round(r)+"px,"+Math.round(u)+"px,0)",this._columns[h]+=this._sizes[o]+(1<this._count?this._gutter:this.conf.ultimateGutter)}this._container.style.height=this._columns[this.getLongest()]+"px"}else console.error("Container not found")},t.prototype.getNextColumn=function(t){return t%this._columns.length},t.prototype.getShortest=function(){for(var t=0,i=0;i<this._count;i++)this._columns[i]<this._columns[t]&&(t=i);return t},t.prototype.getLongest=function(){for(var t=0,i=0;i<this._count;i++)this._columns[i]>this._columns[t]&&(t=i);return t},t.prototype.resizeThrottler=function(){this._resizeTimeout||(this._resizeTimeout=setTimeout(function(){this._resizeTimeout=null,this._container.clientWidth!=this._width&&this.layout()}.bind(this),33))},module.exports=t}();
